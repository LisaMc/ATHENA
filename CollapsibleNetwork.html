
<!DOCTYPE html>
<html>
    <link rel="stylesheet" href="css/royalslider.min.css" type="text/css">
    <link rel="stylesheet" href="css/clientlibs.min.css" type="text/css">
    <script type="text/javascript" src="d3/d3.js"></script>
    <script type="text/javascript" src="d3/d3.geom.js"></script>
    <script type="text/javascript" src="d3/d3.layout.js"></script>
  

    <!-- Typekit -->
    <script type="text/javascript" src="//use.typekit.net/ead0eor.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="basic science research, northweststtr, nwsttr, clinical research, solid tumors, Translational Research Program, solid tumor cancers, solid tumor translational research, Seattle Cancer Care Alliance, population-based research, solid tumor, STTR cancer, fred hutchinson cancer research center, seattle childrens hospital,
    			Computational Biology, Bioinformatics, Systems Biology, Statistics, Mathematics, Computer Science, Data Management, ATHENA, Health Informatics" />
    <meta name="description" content="ATHENA: Approaches to Translational Health Experiments, Informatics, and Analysis" />
    <meta name="robots" content="all" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="width" />     

    <meta property="og:title" content="ATHENA" />
    <meta property="og:description" content="ATHENA: Approaches to Translational Health Experiments, Informatics, and Analysis" /> 

    <title>ATHENA</title>
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
	<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="js/clientlibs.min.js"></script>

    <style type="text/css">

circle.node {
  cursor: pointer;
  stroke: #000;
  stroke-width: .5px;
}
.node text {
  font: 15px sans-serif;
  pointer-events: none;
  text-anchor: middle;
}

line.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}

    </style>
   
    <div id="header_element" class="header">
 	<div class="header_contents">
   	<nav><div class="utility_nav noprint">

    <ul>
    <li class="utility_home"><a href="/en.html">Home</a></li>
    <li><a href="www.sttrcancer.org/en/about-sttr.html">About <span class="droptext">STTR</span></a></li>
    <li><a href="www.sttrcancer.org/en/education-training.html">Training</a></li>
    <li><a href="www.sttrcancer.org/en/diseases-we-treat.html">Diseases <span class="droptext">We Treat</span></a></li>
    <li><a href="www.sttrcancer.org/en/donate.html">Donate</a></li>
     <li><a href="https://share.fhcrc.org/sites/cancer-center/sttr/" target="_blank" title="Link to the members site opens in a new browser window">Members</a></li>
     <li><a href="www.sttrcancer.org/en/contact-us.html">Contact <span class="droptext">Us</span></a></li>

     <li class="search">
      <a id="utility_nav_search_icon" href="www.sttrcancer.org/en/util/search.html">Search</a>     
    </li>      

    </ul>
    <div id="utility_search" class="utility_search">
    <div class="sitesearch">
      <form id="utility_search_form" action="www.sttrcancer.org/en/util/search.html">
       <input class="searchbox" type="text" value="" placeholder="Search this site..." name="q" maxlength="2048">
       <input class="searchbutton" type="submit" value="&gt;">      
      </form>
     </div>
    </div>

   </div></nav><!-- /utility_nav -->

   

   <div class="logo">
    <div class="logo_contents">
      <a href="/en.html">
        <img src="images/STTR_logo_240x67.jpg" alt="Solid Tumor Translational Research"/>
      </a>
    </div><!-- /logo_contents-->
   </div><!-- /logo -->

   

   <nav><div class="global_nav noprint" id="global_nav">
     <!-- ornamentation -->
     <div class="mobile_texture" id="mobile_texture"></div>
     <!-- global menu -->
     <div class="global_menu" id="global_menu">
       <div class="global_menu_contents">
         <ul class="mobile_search">
           <li>
             <div class="sitesearch">
               <form action="www.sttrcancer.org/en/util/search.html">
                 <input class="searchbox" type="text" value="" placeholder="Search this site..." name="q" maxlength="2048">
                 <input class="searchbutton" type="submit" value="&gt;">      
               </form>           
             </div>  
           </li>
         </ul>

<ul class="core">            

          <li><a href="ATHENA_home.html">Home</a>
             </li>
          <li><a href="Search_Query.html">Search</a>
             </li>
         <li><a href="Search_DataTable.html">Browse</a>
            </li>
         <li><a href="CollapsibleNetwork.html">Network</a>
            </li>
 <!--        <li><a href="CollapsibleNetwork.html">Explore</a>
            </li>
         <li><a href="CollapsibleNetwork.html">Reports</a>
            </li>
         <li><a href="CollapsibleNetwork.html">Describe</a>
            </li>
-->
</ul>
         <ul class="mobile_utilities">
           <li><a href="www.sttrcancer.org/en/about-sttr.html">About STTR</a></li>
           <li><a href="www.sttrcancer.org/en/education-training.html">Training</a></li>
           <li><a href="www.sttrcancer.org/en/diseases-we-treat.html">Diseases We Treat</a></li>
           <li><a href="www.sttrcancer.org/en/donate.html">Donate</a></li>
           <li><a href="https://share.fhcrc.org/sites/cancer-center/sttr/" target="_blank" title="Link to the members site opens in a new browser window">Members</a></li>
           <li><a href="www.sttrcancer.org/en/contact-us.html">Contact us</a></li>         
         </ul>
       </div>
     </div><!-- /global_menu -->          
   </div></nav><!-- /global_nav -->
  </div><!-- /header_contents -->
 </div>

</head>
    
    
    <script type="text/javascript">

var w = 1280,
    h = 800,
    root,
    node,
    link,
    force, 
    vis;

$(document).ready(function() {

	
 force = d3.layout.force()
    .on("tick", tick)
    .charge(function(d) { return d._children ? -d.size / 10 : -70; })
    .linkDistance(function(d) { return d.target._children ? 100 : 50; })
    .size([w, h - 160]);

 vis = d3.select("#chart").append("svg:svg")
    .attr("width", w)
    .attr("height", h)
  .append('svg:g')
    .call(d3.behavior.zoom().on("zoom", redraw))
  ;

vis.append('svg:rect')
    .attr('width', w)
    .attr('height', h)
    .attr('fill', 'white');

    node =vis.selectAll("circle.node"),
    link =vis.selectAll("line.link");

d3.json("data/People_CollapsibleNetwork.json", function(json) {
  root = json;
  root.fixed = true;
  root.x = w / 2;
  root.y = h / 2 - 80;
  update();
});
})

function redraw() {
  vis.attr("transform",
      "translate(" + d3.event.translate + ")"
      + " scale(" + d3.event.scale + ")");
}

function update() {
  var nodes = flatten(root),
      links = d3.layout.tree().links(nodes);

  // Restart the force layout.
  force
      .nodes(nodes)
      .links(links)
      .start();

  // Update the links…
  link = link
      .data(links, function(d) { return d.target.id; });

  // Enter any new links.
  link.enter().insert("svg:line", ".node")
      .attr("class", "link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  // Exit any old links.
  link.exit().remove();


  // Update the nodes…
  node = node.data(nodes, function(d) { return d.id; })     ;

 node.transition()
      .attr("r", function(d) { return d.children ? 4.5 : Math.sqrt(d.size) / 10; });
 
  node.exit().remove();

var nodeEnter = node.enter().append("svg:g")
      .attr("class", "node")
      .on("click", click)
      .call(force.drag);
 
  nodeEnter.append("svg:circle")
     .attr("r", function(d) { return d.children ? Math.sqrt(d.size) / 10 : 4.5; })
//     .attr("r", function(d) { return d.children ? 4.5 : Math.sqrt(d.size) / 10; })
	 .style("fill", color);
  
   nodeEnter.append("svg:text")
      .attr("text-anchor", "middle")
      .attr("dx", function(d) { return 4.5; })
      .attr("dy", ".6em")
      .style("font-size", function(d) { return d.children ? 11 : Math.sqrt(d.size) / 4; })
      .style("font-weight","bold")
      .text(function(d) { return d.name; });
    
 
  // Exit any old nodes.
  node.exit().remove();
//  nodeEnter.exit().remove()
  
//  link = vis.selectAll("line.link");
//  node = vis.selectAll(".node");

}

function tick() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

	node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

}


function color(d) {
  return d._children ? "black" : d.children ? "DeepSkyBlue" : "grey";
}

// Toggle children on click.
function click(d) {
	console.log("d.chd: " + d.children)
	console.log("d._chd: " + d._children)
  if (d.children) {
    d._children = d.children;
    d.children = null;
  } else {
    d.children = d._children;
    d._children = null;
  }
  update();
}

// Returns a list of all nodes under the root.
function flatten(root) {
  var nodes = [], i = 0;

  function recurse(node) {
    if (node.children) node.size = node.children.reduce(function(p, v) { return p + recurse(v); }, 0);
    if (!node.id) node.id = ++i;
    nodes.push(node);
    return node.size;
  }

  root.size = recurse(root);
  return nodes;
}
 </script>


  <body>
    <div class="body">
    	<div id="chart"></div>
	    <h2>
    	  Tree Structure<br>
	      People->Title->Field->Institution->Name
    	</h2>
	</div>


  </body>
</html>
